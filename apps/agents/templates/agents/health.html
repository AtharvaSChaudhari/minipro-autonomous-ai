{% extends "base.html" %}
{% block content %}
<div class="space-y-6">
  <!-- Slogan -->
  <div class="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight tracking-tight text-[var(--c-primary)]">
    Build your safety,not just income because your efforts deserves security
  </div>

  <!-- Benefits -->
  <div data-animate="slide-up" class="bg-white rounded-xl p-6 border border-neutral-200 shadow-sm">
    <h3 class="font-semibold mb-2 text-[var(--c-n900)]">Why health insurance matters</h3>
    <ul class="space-y-2 text-[var(--c-n900)]">
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>Covers hospital bills, surgeries, medicines, and diagnostic tests.</span></li>
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>Prevents you from using your savings during medical crises.</span></li>
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>Get treated at network hospitals without paying upfront — your insurer settles the bills directly</span></li>
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>Family floater plans cover spouse, children, and parents under a single policy.</span></li>
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>If you don’t make a claim in a year, your sum insured increases — free health coverage boost!</span></li>
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>Get lump-sum payouts for serious illnesses like cancer, heart attack, or stroke.</span></li>
      <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-1 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg><span>Covers delivery expenses and postnatal care for both mother and child.</span></li>
    </ul>
  </div>

  

  <!-- Family inputs -->
  <div data-animate="slide-up" class="bg-white rounded-xl p-6 border border-neutral-200 shadow-sm">
    <h3 class="font-semibold mb-2 text-[var(--c-n900)]">Tell us about your family</h3>
    <form id="familyForm" method="post" class="grid grid-cols-1 sm:grid-cols-3 gap-3 items-end">
      {% csrf_token %}
      <input type="hidden" name="form_type" value="family" />
      <div>
        <label class="block text-xs text-[var(--c-n500)] mb-1">Adults (18+)</label>
        <input type="number" min="1" name="adults" value="{{ adults|default:2 }}" class="w-full px-3 py-2 rounded-lg border border-neutral-200 text-sm focus:outline-none focus:ring-2 focus:ring-[var(--c-primary)] focus:border-[var(--c-primary)]" />
      </div>
      <div>
        <label class="block text-xs text-[var(--c-n500)] mb-1">Kids (&lt;18)</label>
        <input type="number" min="0" name="kids" value="{{ kids|default:0 }}" class="w-full px-3 py-2 rounded-lg border border-neutral-200 text-sm focus:outline-none focus:ring-2 focus:ring-[var(--c-primary-light)] focus:border-[var(--c-primary-light)]" />
      </div>
      <div>
        <button class="px-4 py-2 rounded-lg bg-[var(--c-primary)] text-white hover:bg-[var(--c-primary-light)] hover:text-[var(--c-n900)] transition-colors w-full">Apply</button>
      </div>
    </form>
  </div>

  <div data-animate="slide-up" class="bg-white rounded-xl p-6 border border-neutral-200 shadow-sm">
    <h3 class="font-semibold mb-2 text-[var(--c-n900)]">Ask Health Assistant</h3>
    <form id="healthChatForm" method="post" class="space-y-3">
      {% csrf_token %}
      <input type="hidden" name="form_type" value="chat" />
      <textarea name="prompt" rows="4" class="w-full px-3 py-2 rounded-lg bg-white border border-neutral-200 focus:outline-none focus:ring-2 focus:ring-[var(--c-primary)] focus:border-[var(--c-primary)]" placeholder="e.g., Best family floater for 2 adults + 1 child, 10L cover"></textarea>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-2">
        <button type="button" class="px-3 py-2 bg-neutral-100 border border-neutral-200 rounded text-sm quick" data-q="Family floater vs individual — which is better?">Family vs Individual</button>
        <button type="button" class="px-3 py-2 bg-neutral-100 border border-neutral-200 rounded text-sm quick" data-q="Explain waiting periods and pre-existing conditions in simple terms">Waiting & Pre-existing</button>
        <button type="button" class="px-3 py-2 bg-neutral-100 border border-neutral-200 rounded text-sm quick" data-q="What is cashless hospitalization and how to use it?">Cashless</button>
        <button type="button" class="px-3 py-2 bg-neutral-100 border border-neutral-200 rounded text-sm quick" data-q="Tax benefits under Section 80D for family?">80D Tax</button>
      </div>
      <button class="px-4 py-2 rounded-lg bg-[var(--c-primary)] text-white hover:bg-[var(--c-primary-light)] hover:text-[var(--c-n900)] transition-colors w-full">Ask</button>
    </form>
    {% if health_cards %}
    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4">
      {% for c in health_cards %}
      <div class="rounded-xl bg-white border border-neutral-200 p-4 hover:shadow-md hover:-translate-y-0.5 transition">
        <div class="font-semibold text-[var(--c-n900)]">{{ c.title }}</div>
        {% if c.subtitle %}<div class="text-sm text-[var(--c-n500)] mt-0.5">{{ c.subtitle }}</div>{% endif %}
        {% if c.highlights and c.highlights|length > 0 %}
        <ul class="mt-2 space-y-1">
          {% for h in c.highlights %}
          <li class="flex items-start gap-2 text-sm text-[var(--c-n900)]">
            <svg class="w-4 h-4 mt-0.5 text-[var(--c-success)]" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 10-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
            <span>{{ h }}</span>
          </li>
          {% endfor %}
        </ul>
        {% endif %}
        {% if c.cta_url and c.cta_label %}
        <a href="{{ c.cta_url }}" target="_blank" rel="noopener" class="mt-3 inline-block px-3 py-1.5 rounded bg-[var(--c-primary)] text-white hover:bg-[var(--c-primary-light)] hover:text-[var(--c-n900)] transition-colors text-sm">{{ c.cta_label }}</a>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% endif %}
    {% if reply %}
    <div class="mt-3 bg-neutral-50 border border-neutral-200 p-3 rounded whitespace-pre-wrap">{{ reply }}</div>
    {% endif %}
  </div>

  <!-- Private firms -->
  <div data-animate="slide-up" class="bg-white rounded-xl p-6 border border-neutral-200 shadow-sm">
    <div class="flex items-center justify-between">
      <h3 class="font-semibold text-[var(--c-n900)]">Private Firms – Affordable Health Insurance</h3>
      <div class="text-xs text-[var(--c-n500)]">Family Floater · Individual · Maternity · Critical Illness · Super Top-Up</div>
    </div>
    <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4">
      {% for p in private_recs %}
      <div class="rounded-xl bg-white border border-neutral-200 p-4 hover:shadow-md hover:-translate-y-0.5 transition">
        <div class="flex items-center gap-3">
          {% if p.logo %}<img src="{{ p.logo }}" alt="logo" class="w-8 h-8 rounded bg-white p-1" onerror="this.style.display='none'" />{% endif %}
          <div>
            <div class="font-semibold">{{ p.brand }}</div>
            <div class="text-[var(--c-n500)] text-sm">{{ p.plan }}</div>
          </div>
        </div>
        <div class="mt-2 flex flex-wrap gap-2">
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">{{ p.type }}</span>
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">Cover: ₹ {{ p.cover_amount_inr|floatformat:0 }}</span>
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">Premium: ₹ {{ p.premium_inr|floatformat:0 }}/yr</span>
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">Waiting: {{ p.waiting_period_months }}m</span>
        </div>
        <a href="{{ p.apply_link }}" target="_blank" rel="noopener" class="mt-3 inline-block px-3 py-1.5 rounded bg-[var(--c-primary)] text-white hover:bg-[var(--c-primary-light)] hover:text-[var(--c-n900)] transition-colors text-sm">Apply</a>
      </div>
      {% empty %}
      <div class="text-[var(--c-n500)]">No private plans to show.</div>
      {% endfor %}
    </div>
  </div>

  <!-- Government of India -->
  <div data-animate="slide-up" class="bg-white rounded-xl p-6 border border-neutral-200 shadow-sm">
    <div class="flex items-center justify-between">
      <h3 class="font-semibold text-[var(--c-n900)]">Government of India – Health Schemes</h3>
      <div class="text-xs text-[var(--c-n500)]">PM-JAY · ESI · CGHS · State schemes</div>
    </div>
    <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4">
      {% for p in govt_recs %}
      <div class="rounded-xl bg-white border border-neutral-200 p-4 hover:shadow-md hover:-translate-y-0.5 transition">
        <div class="flex items-center gap-3">
          {% if p.logo %}<img src="{{ p.logo }}" alt="logo" class="w-8 h-8 rounded bg-white p-1" onerror="this.style.display='none'" />{% endif %}
          <div>
            <div class="font-semibold">{{ p.brand }}</div>
            <div class="text-[var(--c-n500)] text-sm">{{ p.plan }}</div>
          </div>
        </div>
        <div class="mt-2 flex flex-wrap gap-2">
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">{{ p.type }}</span>
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">Cover: ₹ {{ p.cover_amount_inr|floatformat:0 }}</span>
          <span class="px-2 py-0.5 text-xs rounded bg-neutral-100 border border-neutral-200">Waiting: {{ p.waiting_period_months }}m</span>
        </div>
        <a href="{{ p.apply_link }}" target="_blank" rel="noopener" class="mt-3 inline-block px-3 py-1.5 rounded bg-[var(--c-primary)] text-white hover:bg-[var(--c-primary-light)] hover:text-[var(--c-n900)] transition-colors text-sm">How to Apply</a>
      </div>
      {% empty %}
      <div class="text-[var(--c-n500)]">No government schemes to show.</div>
      {% endfor %}
    </div>
  </div>
</div>

<script>
  (function(){
    const form = document.getElementById('healthChatForm');
    if (!form) return;
    const ta = form.querySelector('textarea[name="prompt"]');
    form.querySelectorAll('.quick').forEach(btn => {
      btn.addEventListener('click', () => {
        if (!ta) return;
        ta.value = btn.getAttribute('data-q') || '';
        form.submit();
      });
    });
  })();
  </script>
{% endblock %}
